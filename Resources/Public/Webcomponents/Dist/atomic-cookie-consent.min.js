class AtomicCookieConsent extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}get expiringDays(){return this.hasAttribute("expiringDays")?this.getAttribute("expiringDays"):365}static get cookieStorage(){return"document.cookie"}static get cookieIdentifier(){return"cookie_consent"}get identifier(){return this.hasAttribute("identifier")?this.getAttribute("identifier"):""}get embedType(){return this.hasAttribute("embedType")?this.getAttribute("embedType"):"iframe"}get contentName(){return this.hasAttribute("contentName")?this.getAttribute("contentName"):"Nicht gesetzt"}get contentProtector(){return this.hasAttribute("contentProtector")?this.getAttribute("contentProtector"):"Nicht gesetzt"}get linkPrivacyPolicy(){return this.hasAttribute("linkPrivacyPolicy")?this.getAttribute("linkPrivacyPolicy"):"#"}get stateLoaded(){return this.hasAttribute("loaded")}get slotConsentedContent(){return this.querySelector('[slot="consentedContent"]')}get allowBt(){let t;return null===(t=this.querySelector('[slot="allowButton"]'))&&(t=this.shadowRoot.querySelector("button[allowBT]")),t}get allowAllBt(){let t;return null===(t=this.querySelector('[slot="allowAllButton"]'))&&(t=this.shadowRoot.querySelector("button[allowAllBT]")),t}static get doConsentCookieExist(){return!!AtomicCookieConsent.getCookie(AtomicCookieConsent.cookieIdentifier)}static getCookie(t){for(var e=document.cookie.split(";"),o=0;o<e.length;o++){var n=e[o].split("=");if(t==n[0].trim())return JSON.parse(decodeURIComponent(n[1]))}return null}get isCookieConsentedGlobally(){if(console.log("isCookieConsentedGlobally"),!AtomicCookieConsent.doConsentCookieExist)return console.log(this.constructor.name+': cookie:"'+this.identifier+'" isnt consented globally'),!1;let t=AtomicCookieConsent.getCookie(AtomicCookieConsent.cookieIdentifier);if(t.options&&t.options.includes(this.identifier))return!0;console.log(this.constructor.name+': cookie:"'+this.identifier+'" isnt consented globally')}static createCookie(){if(this.hasAttribute("disableDefaultCookie"))return;let t={consent:!1,options:[]};t=encodeURIComponent(JSON.stringify(t));var e=new Date;e.setTime(e.getTime()+24*this.expiringDays*60*60*1e3);var o="expires="+e.toUTCString();document.cookie=AtomicCookieConsent.cookieIdentifier+"="+t+";"+o+";path=/;SameSite=Strict"}_isEncoded(t){return t!==decodeURIComponent(t)}static updateCookieConsent(t=""){if(""===t)return void console.error("atomic-cookie-consent: updateCookieConsent > identifier is empty");AtomicCookieConsent.doConsentCookieExist||(console.log("updateCookieConsent: cookie doesnt exist"),AtomicCookieConsent.createCookie());let e=this.getCookie(AtomicCookieConsent.cookieIdentifier);if(e.options&&e.options.includes(t))return;let o={consent:!0,options:[]};o.options=e.options,o.options.push(t),o=JSON.stringify(o),o=encodeURIComponent(o);var n=new Date;n.setTime(n.getTime()+24*this.expiringDays*60*60*1e3);var i="expires="+n.toUTCString();document.cookie=AtomicCookieConsent.cookieIdentifier+"="+o+";"+i+";path=/;SameSite=Strict"}connectedCallback(){this.render(),this.allowBt.addEventListener("click",t=>{this._onClickAllow()}),this.allowAllBt.addEventListener("click",t=>{this._onClickAllowGlobally()}),this.isCookieConsentedGlobally?this.showConsentContent():this.hideConsentContent(),document.addEventListener("atomic-cookie-consent",t=>{t.detail.identifier!==this.identifier||null!==t.detail.type&&"add"!==t.detail.type?t.detail.identifier===this.identifier&&"remove"===t.detail.type&&this.hideConsentContent():this.showConsentContent()},!1)}_onClickAllow(){this.showConsentContent()}_onClickAllowGlobally(){this.hasAttribute("overrideAllCallback")?eval(this.getAttribute("overrideAllCallback")):(AtomicCookieConsent.doConsentCookieExist||AtomicCookieConsent.createCookie(),AtomicCookieConsent.updateCookieConsent(this.identifier),document.dispatchEvent(new CustomEvent("atomic-cookie-consent",{detail:{identifier:this.identifier,type:"add"}})))}showConsentContent(){if(this.hasAttribute("loaded"))return;this.setAttribute("loaded","");let t=this.querySelectorAll('script[type="text/x-gdpr-protected"]');this.querySelectorAll("script[data-src]"),this.querySelectorAll('script[type="script/x-gdpr-protected"]');t&&t.forEach(t=>{let e=t.innerHTML;if(this.slotConsentedContent)this.slotConsentedContent.innerHTML=e;else{const t=document.createElement("div");t.setAttribute("slot","consentedContent"),this.appendChild(t),t.innerHTML=e}let o=this.querySelectorAll("*[data-src]");o.length>0&&o.forEach(t=>{let e=t.getAttribute("data-src");t.setAttribute("src",e)}),t.innerHTML=""}),document.dispatchEvent(new CustomEvent("atomic-cookie-consent",{detail:{identifier:this.identifier,type:"add"}}))}hideConsentContent(){if(!this.hasAttribute("loaded"))return;this.removeAttribute("loaded");let t=this.querySelector('script[type="text/x-gdpr-protected"]');if(t){let e=this.slotConsentedContent.innerHTML;t.innerHTML=e}}updateStatus(){this.isCookieConsentedGlobally&&!this.stateLoaded&&this.showConsentContent()}render(){this.shadowRoot.innerHTML=`\n        <style>\n          :host{\n             --atomic-cookie-consent--button-color: #008227;\n\n             position:relative;\n             display:block;\n             min-height: var(--atomic-cookie-consent--min-height, 150px);\n          }\n          :host .overlay{\n            z-index:10;\n            background:var(--atomic-cookie-consent--background, #eee);\n            position:relative;\n            left:0;\n            top:0;\n            height: auto;\n            width:calc(100% - 40px);\n            display:flex;\n            align-items: center;\n            justify-content: center;\n            padding:20px;\n            box-shadow: 0 0 0 1px var(--atomic-cookie-consent--border-color.rgba(255,255,255,0.5));\n          }\n          :host([embed16by9]) .overlay{\n            position:absolute;\n            height: calc(100% - 40px);\n          }\n          :host .overlay{\n            text-align:center;\n          }\n\n          .intro-text{\n            display:block;\n          }\n\n          :host([loaded]) .overlay{\n            display:none;\n\n          }\n          :host button{\n            display:inline-flex;\n            padding:var(--atomic-cookie-consent--button-padding, 7px 15px);\n            cursor:pointer;\n            border: var(--atomic-cookie-consent-button-border, 2px solid #008227);\n            border-color:var(--atomic-cookie-consent-button-background-color, #008227);\n            color: var(--atomic-cookie-consent-button-color , #008227);\n            margin-bottom:10px;\n          }\n          :host button[allowAllBT]{\n            display:inline-flex;\n            border: var(--atomic-cookie-consent-button-all--border, 2px solid #008227);\n            background: var(--atomic-cookie-consent-button-all-background-color, #008227);\n            color: var(--atomic-cookie-consent-button-all-color , white);\n            margin-bottom:10px;\n          }\n          :host button:hover{\n            opacity:0.8;\n          }\n          :host([embed16by9]) [name="consentedContent"]{\n            position: relative;\n            display: block;\n            width: 100%;\n            padding: 56.25% 0 0 0;\n            overflow: hidden;\n          }\n          :host([embed16by9]) ::slotted([slot="consentedContent"]){\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            border: 0;\n          }\n        </style>\n\n        <div class="overlay">\n            <div class="centered">\n                <div part="intro-text">\n                    <slot name="introtext">\n                        <p>Mit dem Laden von "${this.contentName}" akzeptieren Sie die\n                        <br><a href="${this.linkPrivacyPolicy}" target="blank">Datenschutzerkl√§rung</a> von ${this.contentProtector}.</p>\n                    </slot>\n                </div>\n                <div part="buttons">\n                    <slot name="allowButton">\n                        <button allowBT class="button-allow" part="allowButton">\n                            ${this.contentName} laden\n                        </button>\n                    </slot>\n                    <slot name="allowAllButton">\n                        <button allowAllBT class="button-allow" part="allowAllButton">\n                            ${this.contentName} "immer" laden\n                        </button>\n                    </slot>\n                </div>\n            </div>\n        </div>\n        <slot></slot>\n        <slot name="consentedContent"></slot>\n    `}}void 0===customElements.get("atomic-cookie-consent")&&customElements.define("atomic-cookie-consent",AtomicCookieConsent);